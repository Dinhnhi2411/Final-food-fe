{"ast":null,"code":"import _objectSpread from\"D:/Gitlab/dinhngocliennhi1999_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{yupResolver}from\"@hookform/resolvers/yup\";import{LoadingButton}from\"@mui/lab\";import{Box,Card,Grid,Stack,Typography}from\"@mui/material\";import React,{useCallback}from\"react\";import{useForm}from\"react-hook-form\";import{useDispatch,useSelector}from\"react-redux\";import*as yup from\"yup\";import{FormProvider,FTextField,FUploadAvatar}from\"../../components/form\";import useAuth from\"../../hooks/useAuth\";import{fData}from\"../../utils/numberFormat\";import{updateUserProfile}from\"./userSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateUserSchema=yup.object().shape({name:yup.string().required(\"Name is required\")});function AccountGeneral(){var dispatch=useDispatch();var _useAuth=useAuth(),user=_useAuth.user;var isLoading=useSelector(function(state){return state.user.isLoading;});var defaultValues={name:(user===null||user===void 0?void 0:user.name)||\"\",email:(user===null||user===void 0?void 0:user.email)||\"\",avatarUrl:(user===null||user===void 0?void 0:user.avatarUrl)||\"\",phoneNumber:(user===null||user===void 0?void 0:user.phone)||\"\",address:(user===null||user===void 0?void 0:user.address)||\"\",city:(user===null||user===void 0?void 0:user.city)||\"\",country:(user===null||user===void 0?void 0:user.country)||\"\"};var methods=useForm({resolver:yupResolver(UpdateUserSchema),defaultValues:defaultValues});var setValue=methods.setValue,handleSubmit=methods.handleSubmit,isSubmitting=methods.formState.isSubmitting;var handleDrop=useCallback(function(acceptedFiles){var file=acceptedFiles[0];if(file){setValue(\"avatarUrl\",Object.assign(file,{preview:URL.createObjectURL(file)}));}},[setValue]);var onSubmit=function onSubmit(data){dispatch(updateUserProfile(_objectSpread({userId:user._id},data)));};return/*#__PURE__*/_jsx(FormProvider,{methods:methods,onSubmit:handleSubmit(onSubmit),children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{sx:{py:10,px:3,textAlign:\"center\"},children:/*#__PURE__*/_jsx(FUploadAvatar,{name:\"avatarUrl\",accept:\"image/*\",maxSize:3145728,onDrop:handleDrop,helperText:/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{mt:2,mx:\"auto\",display:\"block\",textAlign:\"center\",color:\"text.secondary\"},children:[\"Allowed *.jpeg, *.jpg, *.png, *.gif\",/*#__PURE__*/_jsx(\"br\",{}),\" max size of \",fData(3145728)]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsxs(Card,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"grid\",rowGap:3,columnGap:2,gridTemplateColumns:{xs:\"repeat(1, 1fr)\",sm:\"repeat(2, 1fr)\"}},children:[/*#__PURE__*/_jsx(FTextField,{name:\"name\",label:\"Name\"}),/*#__PURE__*/_jsx(FTextField,{name:\"email\",label:\"Email\",disabled:true}),/*#__PURE__*/_jsx(FTextField,{name:\"phoneNumber\",label:\"Phone Number\"}),/*#__PURE__*/_jsx(FTextField,{name:\"address\",label:\"Address\"}),/*#__PURE__*/_jsx(FTextField,{name:\"city\",label:\"City\"}),/*#__PURE__*/_jsx(FTextField,{name:\"country\",label:\"Country\"})]}),/*#__PURE__*/_jsx(Stack,{spacing:3,alignItems:\"flex-end\",sx:{mt:3},children:/*#__PURE__*/_jsx(LoadingButton,{type:\"submit\",variant:\"contained\",loading:isSubmitting||isLoading,children:\"Save Changes\"})})]})})]})});}export default AccountGeneral;","map":{"version":3,"names":["yupResolver","LoadingButton","Box","Card","Grid","Stack","Typography","React","useCallback","useForm","useDispatch","useSelector","yup","FormProvider","FTextField","FUploadAvatar","useAuth","fData","updateUserProfile","UpdateUserSchema","object","shape","name","string","required","AccountGeneral","dispatch","user","isLoading","state","defaultValues","email","avatarUrl","phoneNumber","phone","address","city","country","methods","resolver","setValue","handleSubmit","isSubmitting","formState","handleDrop","acceptedFiles","file","Object","assign","preview","URL","createObjectURL","onSubmit","data","userId","_id","py","px","textAlign","mt","mx","display","color","p","rowGap","columnGap","gridTemplateColumns","xs","sm"],"sources":["D:/Gitlab/dinhngocliennhi1999_frontend/src/features/user/AccountGeneral.js"],"sourcesContent":["import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { Box, Card, Grid, Stack, Typography } from \"@mui/material\";\r\nimport React, { useCallback } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport * as yup from \"yup\";\r\nimport { FormProvider, FTextField, FUploadAvatar } from \"../../components/form\";\r\nimport useAuth from \"../../hooks/useAuth\";\r\nimport { fData } from \"../../utils/numberFormat\";\r\nimport { updateUserProfile } from \"./userSlice\";\r\n\r\nconst UpdateUserSchema = yup.object().shape({\r\n  name: yup.string().required(\"Name is required\"),\r\n});\r\n\r\nfunction AccountGeneral() {\r\n  const dispatch = useDispatch();\r\n\r\n  const { user } = useAuth();\r\n  const isLoading = useSelector((state) => state.user.isLoading);\r\n\r\n  const defaultValues = {\r\n    name: user?.name || \"\",\r\n    email: user?.email || \"\",\r\n    avatarUrl: user?.avatarUrl || \"\",\r\n    phoneNumber: user?.phone || \"\",\r\n    address: user?.address || \"\",\r\n    city: user?.city || \"\",\r\n    country: user?.country || \"\",\r\n  };\r\n  const methods = useForm({\r\n    resolver: yupResolver(UpdateUserSchema),\r\n    defaultValues,\r\n  });\r\n\r\n  const {\r\n    setValue,\r\n    handleSubmit,\r\n    formState: { isSubmitting },\r\n  } = methods;\r\n\r\n  const handleDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      const file = acceptedFiles[0];\r\n      if (file) {\r\n        setValue(\r\n          \"avatarUrl\",\r\n          Object.assign(file, {\r\n            preview: URL.createObjectURL(file),\r\n          })\r\n        );\r\n      }\r\n    },\r\n    [setValue]\r\n  );\r\n\r\n  const onSubmit = (data) => {\r\n    dispatch(updateUserProfile({ userId: user._id, ...data }));\r\n  };\r\n  return (\r\n    <FormProvider methods={methods} onSubmit={handleSubmit(onSubmit)}>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} md={4}>\r\n          <Card sx={{ py: 10, px: 3, textAlign: \"center\" }}>\r\n            <FUploadAvatar\r\n              name=\"avatarUrl\"\r\n              accept=\"image/*\"\r\n              maxSize={3145728}\r\n              onDrop={handleDrop}\r\n              helperText={\r\n                <Typography\r\n                  variant=\"caption\"\r\n                  sx={{\r\n                    mt: 2,\r\n                    mx: \"auto\",\r\n                    display: \"block\",\r\n                    textAlign: \"center\",\r\n                    color: \"text.secondary\",\r\n                  }}\r\n                >\r\n                  Allowed *.jpeg, *.jpg, *.png, *.gif\r\n                  <br /> max size of {fData(3145728)}\r\n                </Typography>\r\n              }\r\n            />\r\n          </Card>\r\n        </Grid>\r\n\r\n        <Grid item xs={12} md={8}>\r\n          <Card sx={{ p: 3 }}>\r\n            <Box\r\n              sx={{\r\n                display: \"grid\",\r\n                rowGap: 3,\r\n                columnGap: 2,\r\n                gridTemplateColumns: {\r\n                  xs: \"repeat(1, 1fr)\",\r\n                  sm: \"repeat(2, 1fr)\",\r\n                },\r\n              }}\r\n            >\r\n              <FTextField name=\"name\" label=\"Name\" />\r\n              <FTextField name=\"email\" label=\"Email\" disabled />\r\n\r\n              <FTextField name=\"phoneNumber\" label=\"Phone Number\" />\r\n              <FTextField name=\"address\" label=\"Address\" />\r\n\r\n              <FTextField name=\"city\" label=\"City\" />\r\n              <FTextField name=\"country\" label=\"Country\" />\r\n            </Box>\r\n\r\n            <Stack spacing={3} alignItems=\"flex-end\" sx={{ mt: 3 }}>\r\n              <LoadingButton\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                loading={isSubmitting || isLoading}\r\n              >\r\n                Save Changes\r\n              </LoadingButton>\r\n            </Stack>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n    </FormProvider>\r\n  );\r\n}\r\n\r\nexport default AccountGeneral;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}