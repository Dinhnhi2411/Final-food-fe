{"ast":null,"code":"var _jsxFileName = \"D:\\\\Gitlab\\\\dinhngocliennhi1999_frontend\\\\src\\\\features\\\\cart\\\\CartCheckOrder.js\",\n  _s = $RefreshSig$();\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Container } from '@mui/system';\nimport React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useDispatch } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport * as Yup from \"yup\";\nimport { FormProvider } from '../../components/form';\nimport useAuth from '../../hooks/useAuth';\nimport { createOrder } from '../order/orderSlice';\nimport { deleteCart } from './cartSlice';\nimport \"./cart.css\";\nimport { Typography } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst infoSchema = Yup.object().shape({\n  addressShip: Yup.string().required(\"AddressShip is required\"),\n  phone: Yup.number().transform(value => isNaN(value) ? undefined : value).required(\"Phone is required\")\n});\nconst defaultValues = {\n  addressShip: \"\",\n  phone: \"\"\n};\nfunction CartCheckOrder(_ref) {\n  _s();\n  let {\n    cartCount\n  } = _ref;\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const methods = useForm({\n    resolver: yupResolver(infoSchema),\n    defaultValues\n  });\n  const {\n    handleSubmit,\n    formState: {\n      isSubmitting\n    }\n  } = methods;\n  let products = [];\n  let priceShip = 2;\n  let totalPrice = 0;\n  let sum = 0;\n  cartCount.map(item => {\n    products = [...products, {\n      product: item.productId._id,\n      amount: item.amount,\n      sum: item.productId.price * item.amount,\n      cartId: item._id\n    }];\n    sum = item.productId.price * item.amount;\n    totalPrice += sum;\n    return totalPrice;\n  });\n  const handleConfirmtion = async data => {\n    await dispatch(createOrder({\n      name: cartCount[0].author.name,\n      addressShip: data.addressShip,\n      phone: data.phone,\n      products: products,\n      priceShip: priceShip,\n      total: totalPrice,\n      userId: user._id\n    }));\n    setTimeout(() => {\n      navigate(\"/order\");\n    }, 1000);\n    products.forEach(product => {\n      if (product.amount !== 0) {\n        dispatch(deleteCart(product.cartId));\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"400px\",\n    className: \"cart-container\",\n    children: /*#__PURE__*/_jsxDEV(FormProvider, {\n      methods: methods,\n      onSubmit: handleSubmit(handleConfirmtion),\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        textAlign: \"center\",\n        children: \"Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n_s(CartCheckOrder, \"5QR+b4s+T94qXX9xgS1D1CunDmY=\", false, function () {\n  return [useAuth, useNavigate, useDispatch, useForm];\n});\n_c = CartCheckOrder;\nexport default CartCheckOrder;\nvar _c;\n$RefreshReg$(_c, \"CartCheckOrder\");","map":{"version":3,"names":["yupResolver","Container","React","useForm","useDispatch","useNavigate","Yup","FormProvider","useAuth","createOrder","deleteCart","Typography","infoSchema","object","shape","addressShip","string","required","phone","number","transform","value","isNaN","undefined","defaultValues","CartCheckOrder","cartCount","user","navigate","dispatch","methods","resolver","handleSubmit","formState","isSubmitting","products","priceShip","totalPrice","sum","map","item","product","productId","_id","amount","price","cartId","handleConfirmtion","data","name","author","total","userId","setTimeout","forEach"],"sources":["D:/Gitlab/dinhngocliennhi1999_frontend/src/features/cart/CartCheckOrder.js"],"sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup';\r\nimport { Container } from '@mui/system';\r\nimport React from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport * as Yup from \"yup\";\r\nimport { FormProvider } from '../../components/form';\r\nimport useAuth from '../../hooks/useAuth';\r\nimport { createOrder } from '../order/orderSlice';\r\nimport { deleteCart } from './cartSlice';\r\nimport \"./cart.css\";\r\nimport { Typography } from '@mui/material';\r\n\r\nconst infoSchema = Yup.object().shape({\r\n  addressShip: Yup.string().required(\"AddressShip is required\"),\r\n  phone: Yup.number().transform(value => (isNaN(value) ? undefined : value)).required(\"Phone is required\"),\r\n\r\n});\r\n\r\nconst defaultValues = {\r\n  addressShip: \"\",\r\n  phone: \"\"\r\n}\r\n\r\nfunction CartCheckOrder({cartCount}) {\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n    const dispatch = useDispatch();\r\n\r\n    const methods = useForm({\r\n    resolver: yupResolver(infoSchema),\r\n    defaultValues\r\n  });\r\n\r\n  const {\r\n    handleSubmit,\r\n\r\n    formState: { isSubmitting },\r\n  } = methods;\r\n\r\n\r\n\r\n  let products = [];\r\n  let priceShip = 2;\r\n  let totalPrice = 0;\r\n  let sum = 0;\r\n\r\n  cartCount.map((item) => {\r\n    products = [\r\n      ...products,\r\n      {\r\n        product: item.productId._id,\r\n        amount: item.amount,\r\n        sum: item.productId.price * item.amount,\r\n        cartId: item._id,\r\n\r\n      },\r\n    ];\r\n    sum = item.productId.price * item.amount;\r\n   \r\n    totalPrice += sum;\r\n\r\n    return totalPrice;\r\n  });\r\n\r\n  const handleConfirmtion = async (data)=> {\r\n    await dispatch(createOrder(\r\n        {\r\n            name: cartCount[0].author.name,\r\n            addressShip: data.addressShip,\r\n            phone: data.phone,\r\n            products: products,\r\n            priceShip: priceShip,\r\n            total: totalPrice,\r\n            userId: user._id\r\n        }\r\n    ));\r\n    setTimeout(()=> {\r\n        navigate(\"/order\")\r\n    }, 1000);\r\n\r\n    products.forEach((product)=> {\r\n        if(product.amount !== 0) {\r\n            dispatch(deleteCart(product.cartId))\r\n        }\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Container\r\n    maxWidth=\"400px\"\r\n    className=\"cart-container\"\r\n    >\r\n    <FormProvider\r\n     methods={methods}\r\n     onSubmit={handleSubmit(handleConfirmtion)}\r\n     >\r\n    <Typography variant=\"h4\" textAlign=\"center\">\r\n        Order\r\n    </Typography>\r\n    </FormProvider>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default CartCheckOrder\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}