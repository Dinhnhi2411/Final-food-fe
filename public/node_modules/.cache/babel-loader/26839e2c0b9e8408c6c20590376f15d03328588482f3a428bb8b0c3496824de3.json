{"ast":null,"code":"var _jsxFileName = \"D:\\\\Gitlab\\\\dinhngocliennhi1999_frontend\\\\src\\\\features\\\\review\\\\ReviewList.js\",\n  _s = $RefreshSig$();\nimport { Pagination, Typography } from '@mui/material';\nimport { Stack } from '@mui/system';\nimport React, { useEffect } from 'react';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { REVIEWS_PER_PRODUCT } from \"../../app/config\";\nimport LoadingScreen from '../../components/loadingScreen/LoadingScreen';\nimport PaginationBar from '../../components/pagination/PaginationBar';\nimport ReviewCard from './ReviewCard';\nimport { getReviews } from './reviewSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ReviewList(_ref) {\n  _s();\n  let {\n    productId\n  } = _ref;\n  const {\n    reviewsByProduct,\n    reviewsById,\n    count,\n    isLoading,\n    currentPage\n  } = useSelector(state => {\n    var _state$review, _state$review2, _state$review3, _state$review4;\n    return {\n      reviewsByProduct: state === null || state === void 0 ? void 0 : (_state$review = state.review) === null || _state$review === void 0 ? void 0 : _state$review.reviewsByProduct[productId],\n      count: state === null || state === void 0 ? void 0 : state.review.totalReviewsByProduct[productId],\n      currentPage: (state === null || state === void 0 ? void 0 : (_state$review2 = state.review) === null || _state$review2 === void 0 ? void 0 : _state$review2.currentPageByProduct[productId]) || 1,\n      reviewsById: state === null || state === void 0 ? void 0 : (_state$review3 = state.review) === null || _state$review3 === void 0 ? void 0 : _state$review3.reviewsById,\n      isLoading: state === null || state === void 0 ? void 0 : (_state$review4 = state.review) === null || _state$review4 === void 0 ? void 0 : _state$review4.isLoading\n    };\n  }, shallowEqual);\n  console.log(\"reviewByProduct\", reviewsByProduct);\n  console.log(\"count\", count);\n  console.log(\"currentPage\", currentPage);\n  const totalPages = Math.ceil(count / REVIEWS_PER_PRODUCT);\n  const dispatch = useDispatch();\n  const [page, setPage] = useState(1);\n  useEffect(() => {\n    if (productId) dispatch(getReviews({\n      productId,\n      page\n    }));\n  }, [productId, dispatch]);\n  let renderReviews;\n  if (reviewsByProduct) {\n    const reviews = reviewsByProduct === null || reviewsByProduct === void 0 ? void 0 : reviewsByProduct.map(reviewId => reviewsById[reviewId]);\n    renderReviews = /*#__PURE__*/_jsxDEV(Stack, {\n      spacing: 1.5,\n      children: reviews === null || reviews === void 0 ? void 0 : reviews.map(review => /*#__PURE__*/_jsxDEV(ReviewCard, {\n        review: review\n      }, review._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  } else if (isLoading) {\n    renderReviews = /*#__PURE__*/_jsxDEV(LoadingScreen, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Stack, {\n    spacing: 1.5,\n    children: [/*#__PURE__*/_jsxDEV(Stack, {\n      direction: \"row\",\n      justifyContent: \"space-between\",\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle\",\n        sx: {\n          color: \"text.secondary\"\n        },\n        children: count > 1 ? `${count} reviews` : count === 1 ? `${count} review` : \"No review\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), count > REVIEWS_PER_PRODUCT && /*#__PURE__*/_jsxDEV(PaginationBar, {\n        setPage: setPage,\n        page: currentPage,\n        totalPage: totalPages\n        // onChange={(e, page) => dispatch(getReviews({ productId, page }))}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), renderReviews]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 7\n  }, this);\n}\n_s(ReviewList, \"STZym8AOZbXgDQP+2kEmk4/oDYs=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = ReviewList;\nexport default ReviewList;\nvar _c;\n$RefreshReg$(_c, \"ReviewList\");","map":{"version":3,"names":["Pagination","Typography","Stack","React","useEffect","shallowEqual","useDispatch","useSelector","REVIEWS_PER_PRODUCT","LoadingScreen","PaginationBar","ReviewCard","getReviews","ReviewList","productId","reviewsByProduct","reviewsById","count","isLoading","currentPage","state","review","totalReviewsByProduct","currentPageByProduct","console","log","totalPages","Math","ceil","dispatch","page","setPage","useState","renderReviews","reviews","map","reviewId","_id","color"],"sources":["D:/Gitlab/dinhngocliennhi1999_frontend/src/features/review/ReviewList.js"],"sourcesContent":["import { Pagination, Typography } from '@mui/material';\r\nimport { Stack } from '@mui/system';\r\nimport React, { useEffect } from 'react'\r\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux'\r\nimport { REVIEWS_PER_PRODUCT } from \"../../app/config\";\r\nimport LoadingScreen from '../../components/loadingScreen/LoadingScreen';\r\nimport PaginationBar from '../../components/pagination/PaginationBar';\r\nimport ReviewCard from './ReviewCard';\r\nimport { getReviews } from './reviewSlice';\r\nfunction ReviewList({ productId }) {\r\n  const {\r\n    reviewsByProduct,\r\n    reviewsById,\r\n    count,\r\n    isLoading,\r\n    currentPage,\r\n  \r\n  } = useSelector(\r\n    (state) => ({\r\n     \r\n      reviewsByProduct: state?.review?.reviewsByProduct[productId],\r\n      count:state?.review.totalReviewsByProduct[productId],\r\n      currentPage: state?.review?.currentPageByProduct[productId] || 1,\r\n      reviewsById: state?.review?.reviewsById,\r\n      isLoading: state?.review?.isLoading,\r\n    }),\r\n    shallowEqual\r\n   \r\n  );\r\n  \r\n    console.log(\"reviewByProduct\", reviewsByProduct)\r\n    console.log(\"count\", count);\r\n    console.log(\"currentPage\", currentPage)\r\n  const totalPages = Math.ceil(count / REVIEWS_PER_PRODUCT);\r\n  const dispatch = useDispatch();\r\nconst [page, setPage] = useState(1);\r\n  useEffect(() => {\r\n    if (productId) dispatch(getReviews({ productId, page }));\r\n  }, [productId, dispatch]);\r\n\r\n  let renderReviews;\r\n\r\n  if (reviewsByProduct) {\r\n    const reviews = reviewsByProduct?.map((reviewId) => reviewsById[reviewId]);\r\n  \r\n    renderReviews = (\r\n      <Stack spacing={1.5}>\r\n        {reviews?.map((review) => (\r\n          <ReviewCard key={review._id} review={review} />\r\n        ))}\r\n      </Stack>\r\n    );\r\n  } else if (isLoading) {\r\n    renderReviews = <LoadingScreen />;\r\n  }\r\n  return (\r\n      <Stack spacing={1.5}>\r\n      <Stack direction=\"row\" justifyContent=\"space-between\">\r\n        <Typography variant=\"subtitle\" sx={{ color: \"text.secondary\" }}>\r\n          {count > 1\r\n            ? `${count} reviews`\r\n            : count === 1\r\n            ? `${count} review`\r\n            : \"No review\"}\r\n        </Typography>\r\n\r\n        {count > REVIEWS_PER_PRODUCT && (\r\n          <PaginationBar\r\n            setPage={setPage}\r\n            page={currentPage}\r\n            totalPage={totalPages}\r\n            // onChange={(e, page) => dispatch(getReviews({ productId, page }))}\r\n          />\r\n          \r\n        )}\r\n      </Stack>\r\n      {renderReviews}\r\n    </Stack>\r\n  )\r\n}\r\n\r\nexport default ReviewList\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}