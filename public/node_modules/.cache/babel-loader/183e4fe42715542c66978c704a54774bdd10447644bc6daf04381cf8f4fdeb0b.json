{"ast":null,"code":"import{yupResolver}from\"@hookform/resolvers/yup\";import{Button,Grid,Typography}from\"@mui/material\";import React from\"react\";import{useForm}from\"react-hook-form\";import{useDispatch,useSelector}from\"react-redux\";import*as yup from\"yup\";import useAuth from\"../../../hooks/useAuth\";import{getOrdersDashboard,updateOrder}from\"../../order/orderSlice\";import{LoadingButton}from\"@mui/lab\";import{FormProvider,FSelect}from\"../../../components/form\";import{Box}from\"@mui/system\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var UpdateStatusSchema=yup.object().shape({status:yup.string().required(\"status is required\")});function OrderForm(_ref){var orders=_ref.orders,handleClose=_ref.handleClose;var _useSelector=useSelector(function(state){return state.order;}),isLoading=_useSelector.isLoading;var _useAuth=useAuth(),user=_useAuth.user;var dispatch=useDispatch();var userId=user._id;var id=orders._id;var defaultValues={status:(orders===null||orders===void 0?void 0:orders.status)||\"\"};var methods=useForm({resolver:yupResolver(UpdateStatusSchema),defaultValues:defaultValues});var handleSubmit=methods.handleSubmit,isSubmitting=methods.formState.isSubmitting;var onSubmit=function onSubmit(data){var status=data.status;var page=1;dispatch(updateOrder({id:id,status:status}));setTimeout(function(){dispatch(getOrdersDashboard({page:page,userId:userId}));},500);};return/*#__PURE__*/_jsxs(FormProvider,{methods:methods,onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:12,lg:3,children:[/*#__PURE__*/_jsxs(Typography,{sx:{mb:2},children:[\"codeID: (\",orders.orderId,\")\"]}),/*#__PURE__*/_jsx(FSelect,{name:\"status\",label:\"status\",size:\"small\",sx:{xs:200,md:300},children:[{value:\"\",label:\"\"},{value:\"Preparing Order\",label:\"Preparing Order\"},{value:\"Order is shipping\",label:\"Order is shipping\"},{value:\"Delivered\",label:\"Delivered\"},{value:\"Cancel\",label:\"Cancel\"}].map(function(option){return/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value);})})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:3,display:\"flex\",justifyContent:\"flex-end\"},children:[/*#__PURE__*/_jsx(LoadingButton,{sx:{},onClick:handleClose,type:\"submit\",loading:isSubmitting||isLoading,children:\"Save\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Cancel\"})]})]});}export default OrderForm;","map":{"version":3,"names":["yupResolver","Button","Grid","Typography","React","useForm","useDispatch","useSelector","yup","useAuth","getOrdersDashboard","updateOrder","LoadingButton","FormProvider","FSelect","Box","UpdateStatusSchema","object","shape","status","string","required","OrderForm","orders","handleClose","state","order","isLoading","user","dispatch","userId","_id","id","defaultValues","methods","resolver","handleSubmit","isSubmitting","formState","onSubmit","data","page","setTimeout","mb","orderId","xs","md","value","label","map","option","mt","display","justifyContent"],"sources":["D:/Gitlab/dinhngocliennhi1999_frontend/src/features/dashboard/order/OrderForm.js"],"sourcesContent":["import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { Button, Grid, Typography } from \"@mui/material\";\r\nimport React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport * as yup from \"yup\";\r\nimport useAuth from \"../../../hooks/useAuth\";\r\nimport { getOrdersDashboard, updateOrder } from \"../../order/orderSlice\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { FormProvider, FSelect } from \"../../../components/form\";\r\nimport { Box } from \"@mui/system\";\r\n\r\nconst UpdateStatusSchema = yup.object().shape({\r\n  status: yup.string().required(\"status is required\"),\r\n});\r\nfunction OrderForm({ orders, handleClose }) {\r\n  const { isLoading } = useSelector((state) => state.order);\r\n  const { user } = useAuth();\r\n  const dispatch = useDispatch();\r\n  const userId = user._id;\r\n  const id = orders._id;\r\n  const defaultValues = {\r\n    status: orders?.status || \"\",\r\n  };\r\n  const methods = useForm({\r\n    resolver: yupResolver(UpdateStatusSchema),\r\n    defaultValues,\r\n  });\r\n\r\n  const {\r\n    handleSubmit,\r\n\r\n    formState: { isSubmitting },\r\n  } = methods;\r\n\r\n  const onSubmit = (data) => {\r\n    const { status } = data;\r\n    const page = 1;\r\n    dispatch(updateOrder({ id: id, status: status }));\r\n    setTimeout(() => {\r\n      dispatch(getOrdersDashboard({ page, userId }));\r\n    }, 500);\r\n  };\r\n\r\n  return (\r\n    <FormProvider methods={methods} onSubmit={handleSubmit(onSubmit)}>\r\n      <Grid item xs={12} md={12} lg={3}>\r\n        <Typography sx={{ mb: 2 }}>codeID: ({orders.orderId})</Typography>\r\n        <FSelect\r\n          name=\"status\"\r\n          label=\"status\"\r\n          size=\"small\"\r\n          sx={{ xs: 200, md: 300 }}\r\n        >\r\n          {[\r\n            { value: \"\", label: \"\" },\r\n            { value: \"Preparing Order\", label: \"Preparing Order\" },\r\n            { value: \"Order is shipping\", label: \"Order is shipping\" },\r\n            { value: \"Delivered\", label: \"Delivered\" },\r\n            { value: \"Cancel\", label: \"Cancel\" },\r\n          ].map((option) => (\r\n            <option key={option.value} value={option.value}>\r\n              {option.label}\r\n            </option>\r\n          ))}\r\n        </FSelect>\r\n      </Grid>\r\n\r\n      <Box sx={{ mt: 3, display: \"flex\", justifyContent: \"flex-end\" }}>\r\n        <LoadingButton\r\n          sx={{}}\r\n          onClick={handleClose}\r\n          type=\"submit\"\r\n          loading={isSubmitting || isLoading}\r\n        >\r\n          Save\r\n        </LoadingButton>\r\n\r\n        <Button onClick={handleClose}>Cancel</Button>\r\n      </Box>\r\n    </FormProvider>\r\n  );\r\n}\r\n\r\nexport default OrderForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}