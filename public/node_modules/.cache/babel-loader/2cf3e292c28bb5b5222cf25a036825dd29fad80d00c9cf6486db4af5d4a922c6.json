{"ast":null,"code":"import _slicedToArray from\"D:/Gitlab/dinhngocliennhi1999_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Pagination,Typography}from\"@mui/material\";import{Stack}from\"@mui/system\";import React,{useEffect,useState}from\"react\";import{shallowEqual,useDispatch,useSelector}from\"react-redux\";import{REVIEWS_PER_PRODUCT}from\"../../app/config\";import LoadingScreen from\"../../components/loadingScreen/LoadingScreen\";import PaginationBar from\"../../components/pagination/PaginationBar\";import ReviewCard from\"./ReviewCard\";import{getReviews}from\"./reviewSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ReviewList(_ref){var productId=_ref.productId;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useSelector=useSelector(function(state){var _state$review,_state$review2,_state$review3,_state$review4,_state$review5;return{reviewsByProduct:state===null||state===void 0?void 0:(_state$review=state.review)===null||_state$review===void 0?void 0:_state$review.reviewsByProduct[productId],totalReviews:state===null||state===void 0?void 0:state.review.totalReviewsByProduct[productId],currentPage:(state===null||state===void 0?void 0:(_state$review2=state.review)===null||_state$review2===void 0?void 0:_state$review2.currentPageByProduct[productId])||1,reviewsById:state===null||state===void 0?void 0:(_state$review3=state.review)===null||_state$review3===void 0?void 0:_state$review3.reviewsById,isLoading:state===null||state===void 0?void 0:(_state$review4=state.review)===null||_state$review4===void 0?void 0:_state$review4.isLoading,totalPages:state===null||state===void 0?void 0:(_state$review5=state.review)===null||_state$review5===void 0?void 0:_state$review5.totalPages};},shallowEqual),reviewsByProduct=_useSelector.reviewsByProduct,reviewsById=_useSelector.reviewsById,totalReviews=_useSelector.totalReviews,isLoading=_useSelector.isLoading,currentPage=_useSelector.currentPage,totalPages=_useSelector.totalPages;var dispatch=useDispatch();useEffect(function(){if(productId)dispatch(getReviews({productId:productId,page:page}));},[productId,dispatch,page]);var renderReviews;if(reviewsByProduct){var reviews=reviewsByProduct===null||reviewsByProduct===void 0?void 0:reviewsByProduct.map(function(reviewId){return reviewsById[reviewId];});console.log(\"review\",reviews);renderReviews=/*#__PURE__*/_jsx(Stack,{spacing:1.5,children:reviews===null||reviews===void 0?void 0:reviews.map(function(review){return/*#__PURE__*/_jsx(ReviewCard,{review:review},review._id);})});}else if(isLoading){renderReviews=/*#__PURE__*/_jsx(LoadingScreen,{});}return/*#__PURE__*/_jsxs(Stack,{spacing:1.5,children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle\",sx:{color:\"text.secondary\"},children:totalReviews>1?\"\".concat(totalReviews,\" reviews\"):totalReviews===1?\"\".concat(totalReviews,\" review\"):\"No review\"}),/*#__PURE__*/_jsx(PaginationBar,{page:page,setPage:setPage,totalPage:+totalPages})]}),renderReviews]});}export default ReviewList;","map":{"version":3,"names":["Pagination","Typography","Stack","React","useEffect","useState","shallowEqual","useDispatch","useSelector","REVIEWS_PER_PRODUCT","LoadingScreen","PaginationBar","ReviewCard","getReviews","ReviewList","productId","page","setPage","state","reviewsByProduct","review","totalReviews","totalReviewsByProduct","currentPage","currentPageByProduct","reviewsById","isLoading","totalPages","dispatch","renderReviews","reviews","map","reviewId","console","log","_id","color"],"sources":["D:/Gitlab/dinhngocliennhi1999_frontend/src/features/review/ReviewList.js"],"sourcesContent":["import { Pagination, Typography } from \"@mui/material\";\r\nimport { Stack } from \"@mui/system\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { REVIEWS_PER_PRODUCT } from \"../../app/config\";\r\nimport LoadingScreen from \"../../components/loadingScreen/LoadingScreen\";\r\nimport PaginationBar from \"../../components/pagination/PaginationBar\";\r\nimport ReviewCard from \"./ReviewCard\";\r\nimport { getReviews } from \"./reviewSlice\";\r\nfunction ReviewList({ productId }) {\r\n  const [page, setPage] = useState(1)\r\n  const {\r\n    reviewsByProduct,\r\n    reviewsById,\r\n    totalReviews,\r\n    isLoading,\r\n    currentPage,\r\n    totalPages\r\n  } = useSelector(\r\n    (state) => ({\r\n      reviewsByProduct: state?.review?.reviewsByProduct[productId],\r\n      totalReviews: state?.review.totalReviewsByProduct[productId],\r\n      currentPage: state?.review?.currentPageByProduct[productId] || 1,\r\n      reviewsById: state?.review?.reviewsById,\r\n      isLoading: state?.review?.isLoading,\r\n      totalPages:state?.review?.totalPages\r\n    }),\r\n    shallowEqual\r\n  );\r\n\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (productId) dispatch(getReviews({ productId, page }));\r\n  }, [productId, dispatch, page]);\r\n\r\n  let renderReviews;\r\n\r\n  if (reviewsByProduct) {\r\n    const reviews = reviewsByProduct?.map((reviewId) => reviewsById[reviewId]);\r\n    console.log(\"review\", reviews)\r\n\r\n    renderReviews = (\r\n      <Stack spacing={1.5}>\r\n        {reviews?.map((review) => (\r\n          <ReviewCard key={review._id} review={review} />\r\n        ))}\r\n      </Stack>\r\n    );\r\n  } else if (isLoading) {\r\n    renderReviews = <LoadingScreen />;\r\n  }\r\n  return (\r\n    <Stack spacing={1.5}>\r\n      <Stack direction=\"row\" justifyContent=\"space-between\">\r\n        <Typography variant=\"subtitle\" sx={{ color: \"text.secondary\" }}>\r\n          {totalReviews > 1\r\n            ? `${totalReviews} reviews`\r\n            : totalReviews === 1\r\n            ? `${totalReviews} review`\r\n            : \"No review\"}\r\n        </Typography>\r\n\r\n       <PaginationBar\r\n        page={page}\r\n        setPage={setPage}\r\n        totalPage={+totalPages}\r\n       />\r\n      </Stack>\r\n      {renderReviews}\r\n    </Stack>\r\n  );\r\n}\r\n\r\nexport default ReviewList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}