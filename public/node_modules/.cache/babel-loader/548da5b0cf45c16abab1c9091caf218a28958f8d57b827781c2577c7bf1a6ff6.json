{"ast":null,"code":"import _regeneratorRuntime from\"D:/Gitlab/dinhngocliennhi1999_frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Gitlab/dinhngocliennhi1999_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Gitlab/dinhngocliennhi1999_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{FCheckbox,FormProvider,FTextField}from\"../components/form\";import{useForm}from\"react-hook-form\";import{yupResolver}from\"@hookform/resolvers/yup\";import*as Yup from\"yup\";import GoogleIcon from'@mui/icons-material/Google';import FacebookIcon from'@mui/icons-material/Facebook';import{useLocation,useNavigate,Link as RouterLink}from\"react-router-dom\";import{Container}from\"@mui/system\";import{LoadingButton}from\"@mui/lab\";import{Alert,Box,Button,Card,CardContent,IconButton,InputAdornment,Link,Stack,Typography}from\"@mui/material\";import VisibilityIcon from\"@mui/icons-material/Visibility\";import VisibilityOffIcon from\"@mui/icons-material/VisibilityOff\";import useAuth from\"../hooks/useAuth\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var loginSchema=Yup.object().shape({email:Yup.string().email(\"Invalid email\").required(\"Email is required\"),password:Yup.string().required(\"Password is required\")});var defaultValues={email:\"\",password:\"\",remember:true};function LoginPage(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPassword=_useState2[0],setShowPassword=_useState2[1];var auth=useAuth();var navigate=useNavigate();var location=useLocation();var methods=useForm({resolver:yupResolver(loginSchema),defaultValues:defaultValues});var handleSubmit=methods.handleSubmit,reset=methods.reset,setError=methods.setError,_methods$formState=methods.formState,errors=_methods$formState.errors,isSubmiting=_methods$formState.isSubmiting;var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var _location$state,_location$state$from;var from,email,password;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||\"/\";email=data.email,password=data.password;console.log(\"auth\",auth);_context.prev=3;_context.next=6;return auth.login({email:email,password:password},function(){navigate(from,{replace:true});});case 6:_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](3);reset();setError(\"responeError\",_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[3,8]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{maxWidth:\"xs\",children:/*#__PURE__*/_jsx(Card,{position:\"relative\",children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(FormProvider,{methods:methods,onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[!!errors.responeError&&/*#__PURE__*/_jsxs(Alert,{severity:\"error\",children:[\" \",errors.responeError.message]}),/*#__PURE__*/_jsxs(Alert,{severity:\"info\",children:[\"Don't have account? \",\"\",/*#__PURE__*/_jsx(Link,{variant:\"subtitle2\",component:RouterLink,to:\"/register\",children:\"Get start!\"})]}),/*#__PURE__*/_jsx(FTextField,{name:\"email\",label:\"Email address\"}),/*#__PURE__*/_jsx(FTextField,{name:\"password\",label:\"Password\",type:showPassword?\"text\":\"password\",InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setShowPassword(!showPassword);},egde:\"end\",children:showPassword?/*#__PURE__*/_jsx(VisibilityIcon,{}):/*#__PURE__*/_jsx(VisibilityOffIcon,{})})})}})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",justifyContent:\"space-between\",sx:{my:2},children:[/*#__PURE__*/_jsx(FCheckbox,{name:\"remember\",label:\"Remember me\"}),/*#__PURE__*/_jsx(Link,{component:RouterLink,variant:\"subtitle2\",to:\"/\",children:\"Forgot password?\"})]}),/*#__PURE__*/_jsx(LoadingButton,{fullWidth:true,size:\"large\",type:\"submit\",variant:\"contained\",loading:isSubmiting,children:\"Login\"}),/*#__PURE__*/_jsx(Typography,{sx:{mt:3,mb:3,display:\"flex\",justifyContent:\"center\"// color:\"primary.contrastText\",\n},children:\"You can login with\"}),/*#__PURE__*/_jsxs(Box,{sx:{mt:1,display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsxs(Button,{fullWidth:true,size:\"large\",variant:\"contained\",sx:{mr:1,cursor:\"pointer\",borderRadius:5,display:\"flex\",justifyContent:\"center\",backgroundColor:\"success.light\",flexDirection:'row',\"&:hover\":{backgroundColor:\"success.darker\"}},children:[/*#__PURE__*/_jsx(GoogleIcon,{sx:{mt:1}}),/*#__PURE__*/_jsx(Typography,{sx:{fontSize:16,mt:1,textTransform:\"capitalize\"},children:\"Gmail\"})]}),/*#__PURE__*/_jsxs(Button,{fullWidth:true,size:\"large\",variant:\"contained\",sx:{ml:1,cursor:\"pointer\",borderRadius:5,display:\"flex\",justifyContent:\"center\",backgroundColor:\"secondary.light\",flexDirection:'row',\"&:hover\":{backgroundColor:\"secondary.darker\"}},children:[/*#__PURE__*/_jsx(FacebookIcon,{sx:{mt:1}}),/*#__PURE__*/_jsx(Typography,{sx:{fontSize:16,mt:1,textTransform:\"capitalize\"},children:\"Facebook\"})]})]})]})})})});}export default LoginPage;","map":{"version":3,"names":["React","useState","FCheckbox","FormProvider","FTextField","useForm","yupResolver","Yup","GoogleIcon","FacebookIcon","useLocation","useNavigate","Link","RouterLink","Container","LoadingButton","Alert","Box","Button","Card","CardContent","IconButton","InputAdornment","Stack","Typography","VisibilityIcon","VisibilityOffIcon","useAuth","loginSchema","object","shape","email","string","required","password","defaultValues","remember","LoginPage","showPassword","setShowPassword","auth","navigate","location","methods","resolver","handleSubmit","reset","setError","formState","errors","isSubmiting","onSubmit","data","from","state","pathname","console","log","login","replace","responeError","message","endAdornment","my","mt","mb","display","justifyContent","flexDirection","mr","cursor","borderRadius","backgroundColor","fontSize","textTransform","ml"],"sources":["D:/Gitlab/dinhngocliennhi1999_frontend/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { FCheckbox, FormProvider, FTextField } from \"../components/form\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as Yup from \"yup\";\r\nimport GoogleIcon from '@mui/icons-material/Google';\r\nimport FacebookIcon from '@mui/icons-material/Facebook';\r\nimport { useLocation, useNavigate, Link as RouterLink } from \"react-router-dom\";\r\nimport { Container } from \"@mui/system\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { Alert, Box, Button, Card, CardContent, IconButton, InputAdornment, Link, Stack, Typography } from \"@mui/material\";\r\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\r\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\r\nimport useAuth from \"../hooks/useAuth\";\r\n\r\nconst loginSchema = Yup.object().shape({\r\n  email: Yup.string().email(\"Invalid email\").required(\"Email is required\"),\r\n  password: Yup.string().required(\"Password is required\"),\r\n});\r\n\r\nconst defaultValues = {\r\n  email: \"\",\r\n  password: \"\",\r\n  remember: true,\r\n};\r\nfunction LoginPage() {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const auth = useAuth();\r\n  let navigate = useNavigate();\r\n  let location = useLocation();\r\n  \r\n  const methods = useForm({\r\n    resolver: yupResolver(loginSchema),\r\n    defaultValues,\r\n  });\r\n  const {\r\n    handleSubmit,\r\n    reset,\r\n    setError,\r\n    formState: { errors, isSubmiting },\r\n  } = methods;\r\n\r\n  const onSubmit = async (data) => {\r\n    const from = location.state?.from?.pathname || \"/\";\r\n    let { email, password } = data;\r\n    console.log(\"auth\", auth);\r\n    try {\r\n      await auth.login({ email, password }, () => {\r\n        navigate(from, { replace: true });\r\n      });\r\n    } catch (error) {\r\n      reset();\r\n      setError(\"responeError\", error);\r\n    }\r\n   \r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"xs\">\r\n    <Card  position=\"relative\">\r\n      <CardContent>\r\n      <FormProvider methods={methods} onSubmit={handleSubmit(onSubmit)}>\r\n        <Stack spacing={3}>\r\n          {!!errors.responeError && (\r\n            <Alert severity=\"error\"> {errors.responeError.message}</Alert>\r\n          )}\r\n          <Alert severity=\"info\">\r\n            Don't have account? {\"\"}\r\n            <Link variant=\"subtitle2\" component={RouterLink} to=\"/register\">\r\n              Get start!\r\n            </Link>\r\n          </Alert>\r\n\r\n          <FTextField name=\"email\" label=\"Email address\" />\r\n          <FTextField\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                    egde=\"end\"\r\n                  >\r\n                    {showPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n        </Stack>\r\n\r\n        <Stack\r\n          direction=\"row\"\r\n          alignItems=\"center\"\r\n          justifyContent=\"space-between\"\r\n          sx={{ my: 2 }}\r\n        >\r\n          <FCheckbox name=\"remember\" label=\"Remember me\" />\r\n          <Link component={RouterLink} variant=\"subtitle2\" to=\"/\">\r\n            Forgot password?\r\n          </Link>\r\n        </Stack>\r\n\r\n        <LoadingButton\r\n          fullWidth\r\n          size=\"large\"\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n          loading={isSubmiting}\r\n          \r\n        >\r\n          Login\r\n        </LoadingButton>\r\n         \r\n        <Typography\r\n        sx={{\r\n          mt:3,\r\n          mb:3,\r\n          display: \"flex\",\r\n          justifyContent:\"center\",\r\n          // color:\"primary.contrastText\",\r\n         \r\n        }}\r\n        >\r\n          You can login with \r\n        </Typography>\r\n        <Box sx=\r\n        {{\r\n          mt:1,\r\n           display:\"flex\", \r\n           flexDirection:\"row\",\r\n          }}\r\n          >\r\n        <Button\r\n        fullWidth\r\n        size=\"large\"\r\n        variant=\"contained\"\r\n        sx={{\r\n          mr:1,\r\n          cursor: \"pointer\",\r\n          borderRadius: 5,\r\n          display:\"flex\",\r\n          justifyContent:\"center\",\r\n          backgroundColor :\"success.light\",\r\n          flexDirection: 'row',\r\n           \"&:hover\": {\r\n            backgroundColor:\"success.darker\"\r\n          }\r\n        }} \r\n        >\r\n      <GoogleIcon sx={{mt:1}} />\r\n      <Typography sx={{fontSize:16, mt: 1, textTransform: \"capitalize\"}}>\r\n        Gmail\r\n      </Typography>\r\n        </Button>\r\n\r\n      <Button\r\n        fullWidth\r\n        size=\"large\"\r\n        variant=\"contained\"\r\n        sx={{\r\n          ml:1,\r\n          cursor: \"pointer\",\r\n          borderRadius: 5,\r\n          display:\"flex\",\r\n          justifyContent:\"center\",\r\n          backgroundColor :\"secondary.light\",\r\n          flexDirection: 'row',\r\n          \"&:hover\": {\r\n            backgroundColor:\"secondary.darker\"\r\n          }\r\n        }} \r\n        >\r\n      <FacebookIcon sx={{mt:1}}/>\r\n      <Typography sx={{fontSize:16, mt: 1, textTransform: \"capitalize\"}}>\r\n        Facebook\r\n      </Typography>\r\n        </Button>\r\n\r\n        \r\n      </Box>\r\n      </FormProvider>\r\n      </CardContent>\r\n\r\n    </Card>\r\n\r\n    \r\n    </Container>\r\n\r\n\r\n  );\r\n\r\n}\r\n\r\nexport default LoginPage;\r\n"],"mappings":"oYAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,SAAS,CAAEC,YAAY,CAAEC,UAAU,KAAQ,oBAAoB,CACxE,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,WAAW,KAAQ,yBAAyB,CACrD,MAAO,GAAKC,IAAG,KAAM,KAAK,CAC1B,MAAOC,WAAU,KAAM,4BAA4B,CACnD,MAAOC,aAAY,KAAM,8BAA8B,CACvD,OAASC,WAAW,CAAEC,WAAW,CAAEC,IAAI,GAAIC,WAAU,KAAQ,kBAAkB,CAC/E,OAASC,SAAS,KAAQ,aAAa,CACvC,OAASC,aAAa,KAAQ,UAAU,CACxC,OAASC,KAAK,CAAEC,GAAG,CAAEC,MAAM,CAAEC,IAAI,CAAEC,WAAW,CAAEC,UAAU,CAAEC,cAAc,CAAEV,IAAI,CAAEW,KAAK,CAAEC,UAAU,KAAQ,eAAe,CAC1H,MAAOC,eAAc,KAAM,gCAAgC,CAC3D,MAAOC,kBAAiB,KAAM,mCAAmC,CACjE,MAAOC,QAAO,KAAM,kBAAkB,CAAC,wFAEvC,GAAMC,YAAW,CAAGrB,GAAG,CAACsB,MAAM,EAAE,CAACC,KAAK,CAAC,CACrCC,KAAK,CAAExB,GAAG,CAACyB,MAAM,EAAE,CAACD,KAAK,CAAC,eAAe,CAAC,CAACE,QAAQ,CAAC,mBAAmB,CAAC,CACxEC,QAAQ,CAAE3B,GAAG,CAACyB,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB,CACxD,CAAC,CAAC,CAEF,GAAME,cAAa,CAAG,CACpBJ,KAAK,CAAE,EAAE,CACTG,QAAQ,CAAE,EAAE,CACZE,QAAQ,CAAE,IACZ,CAAC,CACD,QAASC,UAAS,EAAG,CACnB,cAAwCpC,QAAQ,CAAC,KAAK,CAAC,wCAAhDqC,YAAY,eAAEC,eAAe,eACpC,GAAMC,KAAI,CAAGb,OAAO,EAAE,CACtB,GAAIc,SAAQ,CAAG9B,WAAW,EAAE,CAC5B,GAAI+B,SAAQ,CAAGhC,WAAW,EAAE,CAE5B,GAAMiC,QAAO,CAAGtC,OAAO,CAAC,CACtBuC,QAAQ,CAAEtC,WAAW,CAACsB,WAAW,CAAC,CAClCO,aAAa,CAAbA,aACF,CAAC,CAAC,CACF,GACEU,aAAY,CAIVF,OAAO,CAJTE,YAAY,CACZC,KAAK,CAGHH,OAAO,CAHTG,KAAK,CACLC,QAAQ,CAENJ,OAAO,CAFTI,QAAQ,oBAENJ,OAAO,CADTK,SAAS,CAAIC,MAAM,oBAANA,MAAM,CAAEC,WAAW,oBAAXA,WAAW,CAGlC,GAAMC,SAAQ,4FAAG,iBAAOC,IAAI,qLACpBC,IAAI,CAAG,kBAAAX,QAAQ,CAACY,KAAK,gEAAd,gBAAgBD,IAAI,+CAApB,qBAAsBE,QAAQ,GAAI,GAAG,CAC5CxB,KAAK,CAAeqB,IAAI,CAAxBrB,KAAK,CAAEG,QAAQ,CAAKkB,IAAI,CAAjBlB,QAAQ,CACrBsB,OAAO,CAACC,GAAG,CAAC,MAAM,CAAEjB,IAAI,CAAC,CAAC,sCAElBA,KAAI,CAACkB,KAAK,CAAC,CAAE3B,KAAK,CAALA,KAAK,CAAEG,QAAQ,CAARA,QAAS,CAAC,CAAE,UAAM,CAC1CO,QAAQ,CAACY,IAAI,CAAE,CAAEM,OAAO,CAAE,IAAK,CAAC,CAAC,CACnC,CAAC,CAAC,uFAEFb,KAAK,EAAE,CACPC,QAAQ,CAAC,cAAc,aAAQ,CAAC,oEAGnC,kBAbKI,SAAQ,4CAab,CAED,mBACE,KAAC,SAAS,EAAC,QAAQ,CAAC,IAAI,uBACxB,KAAC,IAAI,EAAE,QAAQ,CAAC,UAAU,uBACxB,KAAC,WAAW,wBACZ,MAAC,YAAY,EAAC,OAAO,CAAER,OAAQ,CAAC,QAAQ,CAAEE,YAAY,CAACM,QAAQ,CAAE,wBAC/D,MAAC,KAAK,EAAC,OAAO,CAAE,CAAE,WACf,CAAC,CAACF,MAAM,CAACW,YAAY,eACpB,MAAC,KAAK,EAAC,QAAQ,CAAC,OAAO,eAAGX,MAAM,CAACW,YAAY,CAACC,OAAO,GACtD,cACD,MAAC,KAAK,EAAC,QAAQ,CAAC,MAAM,kCACC,EAAE,cACvB,KAAC,IAAI,EAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAEhD,UAAW,CAAC,EAAE,CAAC,WAAW,wBAExD,GACD,cAER,KAAC,UAAU,EAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,eAAe,EAAG,cACjD,KAAC,UAAU,EACT,IAAI,CAAC,UAAU,CACf,KAAK,CAAC,UAAU,CAChB,IAAI,CAAEyB,YAAY,CAAG,MAAM,CAAG,UAAW,CACzC,UAAU,CAAE,CACVwB,YAAY,cACV,KAAC,cAAc,EAAC,QAAQ,CAAC,KAAK,uBAC5B,KAAC,UAAU,EACT,OAAO,CAAE,yBAAMvB,gBAAe,CAAC,CAACD,YAAY,CAAC,EAAC,CAC9C,IAAI,CAAC,KAAK,UAETA,YAAY,cAAG,KAAC,cAAc,IAAG,cAAG,KAAC,iBAAiB,IAAG,EAC/C,EAGnB,CAAE,EACF,GACI,cAER,MAAC,KAAK,EACJ,SAAS,CAAC,KAAK,CACf,UAAU,CAAC,QAAQ,CACnB,cAAc,CAAC,eAAe,CAC9B,EAAE,CAAE,CAAEyB,EAAE,CAAE,CAAE,CAAE,wBAEd,KAAC,SAAS,EAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,aAAa,EAAG,cACjD,KAAC,IAAI,EAAC,SAAS,CAAElD,UAAW,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC,GAAG,8BAEhD,GACD,cAER,KAAC,aAAa,EACZ,SAAS,MACT,IAAI,CAAC,OAAO,CACZ,IAAI,CAAC,QAAQ,CACb,OAAO,CAAC,WAAW,CACnB,OAAO,CAAEqC,WAAY,mBAIP,cAEhB,KAAC,UAAU,EACX,EAAE,CAAE,CACFc,EAAE,CAAC,CAAC,CACJC,EAAE,CAAC,CAAC,CACJC,OAAO,CAAE,MAAM,CACfC,cAAc,CAAC,QACf;AAEF,CAAE,gCAGW,cACb,MAAC,GAAG,EAAC,EAAE,CACN,CACCH,EAAE,CAAC,CAAC,CACHE,OAAO,CAAC,MAAM,CACdE,aAAa,CAAC,KACf,CAAE,wBAEJ,MAAC,MAAM,EACP,SAAS,MACT,IAAI,CAAC,OAAO,CACZ,OAAO,CAAC,WAAW,CACnB,EAAE,CAAE,CACFC,EAAE,CAAC,CAAC,CACJC,MAAM,CAAE,SAAS,CACjBC,YAAY,CAAE,CAAC,CACfL,OAAO,CAAC,MAAM,CACdC,cAAc,CAAC,QAAQ,CACvBK,eAAe,CAAE,eAAe,CAChCJ,aAAa,CAAE,KAAK,CACnB,SAAS,CAAE,CACVI,eAAe,CAAC,gBAClB,CACF,CAAE,wBAEJ,KAAC,UAAU,EAAC,EAAE,CAAE,CAACR,EAAE,CAAC,CAAC,CAAE,EAAG,cAC1B,KAAC,UAAU,EAAC,EAAE,CAAE,CAACS,QAAQ,CAAC,EAAE,CAAET,EAAE,CAAE,CAAC,CAAEU,aAAa,CAAE,YAAY,CAAE,mBAErD,GACF,cAEX,MAAC,MAAM,EACL,SAAS,MACT,IAAI,CAAC,OAAO,CACZ,OAAO,CAAC,WAAW,CACnB,EAAE,CAAE,CACFC,EAAE,CAAC,CAAC,CACJL,MAAM,CAAE,SAAS,CACjBC,YAAY,CAAE,CAAC,CACfL,OAAO,CAAC,MAAM,CACdC,cAAc,CAAC,QAAQ,CACvBK,eAAe,CAAE,iBAAiB,CAClCJ,aAAa,CAAE,KAAK,CACpB,SAAS,CAAE,CACTI,eAAe,CAAC,kBAClB,CACF,CAAE,wBAEJ,KAAC,YAAY,EAAC,EAAE,CAAE,CAACR,EAAE,CAAC,CAAC,CAAE,EAAE,cAC3B,KAAC,UAAU,EAAC,EAAE,CAAE,CAACS,QAAQ,CAAC,EAAE,CAAET,EAAE,CAAE,CAAC,CAAEU,aAAa,CAAE,YAAY,CAAE,sBAErD,GACF,GAGL,GACS,EACD,EAET,EAGK,CAKhB,CAEA,cAAerC,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}