{"ast":null,"code":"import _slicedToArray from\"D:/Gitlab/dinhngocliennhi1999_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Alert,Button,Grid,Typography}from\"@mui/material\";import{Box,Container,Stack}from\"@mui/system\";import{LoadingButton}from\"@mui/lab\";import React,{useEffect,useState}from\"react\";import{useForm}from\"react-hook-form\";import apiService from\"../app/apiService\";import FormProvider from\"../components/form/FormProvider\";import LoadingScreen from\"../components/loadingScreen/LoadingScreen\";import ProductFilter from\"../features/product/ProductFilter\";import ProductList from\"../features/product/ProductList\";import ProductSearch from\"../features/product/ProductSearch\";import ProductSort from\"../features/product/ProductSort\";import\"./stylePage.css\";import{getProducts}from\"../features/product/productSlice\";import{useDispatch,useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function StorePage(){var dispatch=useDispatch();// const [products, setProducts ] = useState([]);\n// const [isLoading, setIsLoading] = useState(true);\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),filterName=_useState4[0],setFilterName=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useSelector=useSelector(function(state){return state.product;}),currentPageProducts=_useSelector.currentPageProducts,productById=_useSelector.productById,isLoading=_useSelector.isLoading,totalProduct=_useSelector.totalProduct;var products=currentPageProducts.map(function(product){return productById[product];});var defaultValues={types:[],priceRange:\"\",sortBy:\"featured\",searchQuery:\"\"};var methods=useForm({defaultValues:defaultValues});var watch=methods.watch,reset=methods.reset;var handleSubmit=function handleSubmit(searchQuery){setPage(1);setFilterName(searchQuery);};useEffect(function(name){name=filterName;setTimeout(function(){dispatch(getProducts({page:page,name:name}));},700);},[page,filterName,dispatch]);var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),list=_useState8[0],setList=_useState8[1];var _useState9=useState(list),_useState10=_slicedToArray(_useState9,2),filterTypes=_useState10[0],setFilterTypes=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];console.log(\"products\",products);return/*#__PURE__*/_jsxs(Container,{sx:{display:\"flex\",minHeight:\"100vh\",mt:3},children:[/*#__PURE__*/_jsx(Stack,{children:/*#__PURE__*/_jsx(FormProvider,{methods:methods,children:/*#__PURE__*/_jsx(ProductFilter,{resetFilter:reset})})}),/*#__PURE__*/_jsxs(Stack,{sx:{flexGrow:1},children:[/*#__PURE__*/_jsxs(Stack,{spacing:2,direction:{xs:\"column\",sm:\"row\"},alignItems:{sm:\"center\"},justifyContent:\"space-between\",mb:2,children:[/*#__PURE__*/_jsx(ProductSearch,{handleSubmit:handleSubmit}),/*#__PURE__*/_jsx(FormProvider,{methods:methods,children:/*#__PURE__*/_jsx(ProductSort,{})})]}),/*#__PURE__*/_jsx(Box,{sx:{position:\"relative\",height:1},children:isLoading?/*#__PURE__*/_jsx(LoadingScreen,{}):/*#__PURE__*/_jsx(_Fragment,{children:error?/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error}):/*#__PURE__*/_jsx(ProductList,{products:products})})}),/*#__PURE__*/_jsx(Box,{sx:{mt:{xs:2,md:5},mb:{xs:2,md:5},display:\"flex\",justifyContent:\"center\"},children:totalProduct?/*#__PURE__*/_jsx(LoadingButton,{variant:\"outlined\",sx:{backgroundColor:\"#F2C200\",fontFamily:\"Comic Sans MS\",p:1,fontWeight:\"600\",fontSize:{xs:15,md:17},color:\"#000\"},size:\"small\",loading:isLoading,onClick:function onClick(){return setPage(function(page){return page+1;});},disabled:Boolean(totalProduct)&&products.length>=totalProduct,children:\"Load more\"}):/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"No Products Yet\"})})]})]});}export default StorePage;","map":{"version":3,"names":["Alert","Button","Grid","Typography","Box","Container","Stack","LoadingButton","React","useEffect","useState","useForm","apiService","FormProvider","LoadingScreen","ProductFilter","ProductList","ProductSearch","ProductSort","getProducts","useDispatch","useSelector","StorePage","dispatch","error","setError","filterName","setFilterName","page","setPage","state","product","currentPageProducts","productById","isLoading","totalProduct","products","map","defaultValues","types","priceRange","sortBy","searchQuery","methods","watch","reset","handleSubmit","name","setTimeout","list","setList","filterTypes","setFilterTypes","loading","setLoading","console","log","display","minHeight","mt","flexGrow","xs","sm","position","height","md","mb","justifyContent","backgroundColor","fontFamily","p","fontWeight","fontSize","color","Boolean","length"],"sources":["D:/Gitlab/dinhngocliennhi1999_frontend/src/pages/StorePage.js"],"sourcesContent":["import { Alert, Button, Grid, Typography } from \"@mui/material\";\r\nimport { Box, Container, Stack } from \"@mui/system\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport apiService from \"../app/apiService\";\r\nimport FormProvider from \"../components/form/FormProvider\";\r\nimport LoadingScreen from \"../components/loadingScreen/LoadingScreen\";\r\nimport ProductFilter from \"../features/product/ProductFilter\";\r\nimport ProductList from \"../features/product/ProductList\";\r\nimport ProductSearch from \"../features/product/ProductSearch\";\r\nimport ProductSort from \"../features/product/ProductSort\";\r\nimport \"./stylePage.css\";\r\nimport { getProducts } from \"../features/product/productSlice\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nfunction StorePage() {\r\n  const dispatch = useDispatch();\r\n  // const [products, setProducts ] = useState([]);\r\n  // const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [filterName, setFilterName] = useState(\"\");\r\n  const [page, setPage] = useState(1);\r\n\r\n  const { currentPageProducts, productById, isLoading, totalProduct } =\r\n    useSelector((state) => state.product);\r\n\r\n  let products = currentPageProducts.map((product) => productById[product]);\r\n\r\n \r\n  const defaultValues = {\r\n    types: [],\r\n    priceRange: \"\",\r\n    sortBy: \"featured\",\r\n    searchQuery: \"\",\r\n  };\r\n\r\n  const methods = useForm({\r\n    defaultValues,\r\n  });\r\n\r\n  const { watch, reset } = methods;\r\n  const handleSubmit = (searchQuery) => {\r\n    setPage(1);\r\n    setFilterName(searchQuery);\r\n  };\r\n  useEffect(\r\n    (name) => {\r\n      name = filterName;\r\n      \r\n      setTimeout(() => {\r\n        dispatch(getProducts({ page, name }));\r\n  \r\n      }, 700);\r\n    },\r\n    [page, filterName, dispatch]\r\n  );\r\nconst [list, setList] = useState([]);\r\nconst [filterTypes, setFilterTypes] = useState(list);\r\nconst [loading, setLoading] = useState(false)\r\n  \r\n  console.log(\"products\", products);\r\n  return (\r\n    <Container sx={{ display: \"flex\", minHeight: \"100vh\", mt: 3 }}>\r\n      <Stack>\r\n        <FormProvider methods={methods}>\r\n          <ProductFilter resetFilter={reset} />\r\n        </FormProvider>\r\n      </Stack>\r\n      \r\n      <Stack sx={{ flexGrow: 1 }}>\r\n        <Stack\r\n          spacing={2}\r\n          direction={{ xs: \"column\", sm: \"row\" }}\r\n          alignItems={{ sm: \"center\" }}\r\n          justifyContent=\"space-between\"\r\n          mb={2}\r\n        >\r\n          <ProductSearch handleSubmit={handleSubmit} />\r\n          <FormProvider methods={methods}>\r\n           <ProductSort/>\r\n          </FormProvider>\r\n         \r\n        </Stack>\r\n\r\n        <Box sx={{ position: \"relative\", height: 1 }}>\r\n          {isLoading ? (\r\n            <LoadingScreen />\r\n          ) : (\r\n            <>\r\n              {error ? (\r\n                <Alert severity=\"error\">{error}</Alert>\r\n              ) : (\r\n                <ProductList products={products} />\r\n              )}\r\n            </>\r\n          )}\r\n        </Box>\r\n\r\n        <Box\r\n          sx={{\r\n            mt: { xs: 2, md: 5 },\r\n            mb: { xs: 2, md: 5 },\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n          {totalProduct ? (\r\n            <LoadingButton\r\n              variant=\"outlined\"\r\n              sx={{\r\n                backgroundColor: \"#F2C200\",\r\n                fontFamily: \"Comic Sans MS\",\r\n                p: 1,\r\n                fontWeight: \"600\",\r\n                fontSize: { xs: 15, md: 17 },\r\n                color: \"#000\",\r\n              }}\r\n              size=\"small\"\r\n              loading={isLoading}\r\n              onClick={() => setPage((page) => page + 1)}\r\n              disabled={\r\n                Boolean(totalProduct) && products.length >= totalProduct\r\n              }\r\n            >\r\n              Load more\r\n            </LoadingButton>\r\n          ) : (\r\n            <Typography variant=\"h6\">No Products Yet</Typography>\r\n          )}\r\n        </Box>\r\n      </Stack>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default StorePage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}